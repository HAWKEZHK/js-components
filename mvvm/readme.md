## MVVM框架双向绑定绑定原理（vue为例）

### MVVM

即`Model-View-ViewModel`的缩写，本质上就是`MVC`的改进版。将其中的View 的状态和行为抽象化，将视图UI 和业务逻辑分开，为开发者提供便利

### 数据劫持

vue.js 则是采用**数据劫持**结合**发布者-订阅者设计模式**模式的方式实现mvvm模型

通过`Object.defineProperty()`来劫持各个属性的`setter`，`getter`

在数据变动时发布消息给订阅者并触发相应的监听回调

### 实现思路

 1. 实现一个数据监听器`Observer`，能够对数据对象`data`的所有属性进行监听，如有变动可拿到最新值并通知订阅者
 2. 实现一个订阅者列表`Dep`，作为`Observer`监听的每一个对象的订阅者列表，`Observer`监听到数据变动（setter）时，执行列表中所有`Watcher`的回调函数（update）
 3. 实现一个指令解析器`Compile`，对每个元素节点的指令进行扫描和解析，根据指令模板替换数据，以及绑定相应的更新函数
 4. 实现一个`Watcher`，作为连接`Observer`和`Compile`的桥梁，能够订阅并收到每个属性变动的通知，执行指令绑定的相应回调函数，从而更新视图
 5. `mvvm`入口函数，整合以上三者
 
### BWT

代码使用ES6编写，并使用了`import`和`export`指令，例子中使用了webpack进行编译